(this.webpackJsonpreact666=this.webpackJsonpreact666||[]).push([[0],{33:function(e,t,c){},37:function(e,t,c){},46:function(e,t,c){},47:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},79:function(e,t,c){"use strict";c.r(t);var a=c(5),n=c.n(a),r=c(40),s=c.n(r),i=(c(46),c(47),c(14)),o=c(12),l=c(18),j=c(9),d=(c(33),c(1)),b=function(e){var t=e.categoria;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("li",{children:Object(d.jsx)(i.b,{className:"listCategorias",to:"/category/".concat(t.id),children:t.description})})})},m=function(e){var t=e.categorias;return Object(d.jsx)("div",{children:Object(d.jsx)("ul",{children:t.map((function(e){return Object(d.jsx)(b,{categoria:e},e.id)}))})})},u=c(41),O=c(13),h=Object(u.a)({apiKey:"AIzaSyB3_flfzBfTF5SI04nStQ8vYK0PdBs6FB0",authDomain:"app-tesysnet.firebaseapp.com",projectId:"app-tesysnet",storageBucket:"app-tesysnet.appspot.com",messagingSenderId:"68754414655",appId:"1:68754414655:web:9e81b971e9b1a928ee6c8a"}),x=Object(O.g)(h),p=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1];return Object(a.useEffect)((function(){return Object(O.f)(Object(O.c)(x,"categorias")).then((function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));n(t)})).catch((function(e){console.log("Error conexion firebase",e)})).finally((function(){console.log("finalizo llamada firebase")})),function(){n([])}}),[]),Object(d.jsx)("div",{children:Object(d.jsx)(m,{categorias:c})})},f=c(20),v=(c(51),c(52),function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"loader"}),"preparando"===e.tipo?Object(d.jsx)("h3",{className:"loaderDesc",children:"Preparando todo para tu compra..."}):"comprando"===e.tipo?Object(d.jsx)("h3",{className:"loaderDesc",children:"Finalizando tu compra..."}):Object(d.jsx)("h3",{className:"loaderDesc",children:"Cargando..."})]})}),g=function(){var e=Object(a.useContext)(y),t=e.carrito,c=e.calculatePrecioTotal,n=e.emptyCart,r=e.removeProducto,s=e.parseNumber,l=Object(a.useState)(!1),b=Object(j.a)(l,2),m=b[0],u=b[1],O=Object(o.g)(),h=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{className:"tituloCartVacio",children:"\xa1El carrito de compras est\xe1 vac\xedo!"}),Object(d.jsx)("img",{className:"avisoCart",src:"https://res.cloudinary.com/dw94zgfgu/image/upload/v1640988714/cartEmpty_kplei5.png"}),Object(d.jsx)("div",{children:Object(d.jsx)(i.b,{to:"/",children:Object(d.jsx)("button",{className:"btnStartBuy",children:"Empezar a comprar"})})})]})},x=function(){return Object(d.jsxs)("div",{children:[Object(d.jsxs)("table",{className:"table table-light table-hover table-carrito",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{className:"table-dark table-tit-prod",scope:"col",children:"Producto"}),Object(d.jsx)("th",{className:"table-dark table-tit-cant",scope:"col",children:"Cantidad"}),Object(d.jsx)("th",{className:"table-dark table-tit-prec",scope:"col",children:"Precio"}),Object(d.jsx)("th",{className:"table-dark table-tit-stot",scope:"col",children:"Subtotal"}),Object(d.jsx)("th",{className:"table-dark table-tit-tach",scope:"col"})]})}),Object(d.jsxs)("tbody",{children:[t.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{className:"prod-name",children:e.name}),Object(d.jsx)("td",{children:e.cantidad}),Object(d.jsxs)("td",{className:"prod-name",children:["$ ",s(e.price)]}),Object(d.jsxs)("td",{className:"prod-name",children:["$ ",s("".concat(e.cantidad*e.price))]}),Object(d.jsx)("td",{children:Object(d.jsx)("img",{className:"tachito",src:"https://res.cloudinary.com/dw94zgfgu/image/upload/v1641066871/tachito_yzwc0i.svg",onClick:function(){return r(e.id)}})})]})})),Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{colspan:"2"}),Object(d.jsx)("td",{className:"totalPrecio",children:"TOTAL"}),Object(d.jsxs)("td",{className:"totalPrecio",children:["$ ",c()]}),Object(d.jsx)("td",{})]})]})]}),Object(d.jsx)("button",{className:"botonTerminar",onClick:function(){return p()},children:"Comprar ahora"}),Object(d.jsx)("button",{className:"botonVaciar",onClick:function(){return n()},children:"Vaciar carrito"})]})},p=function(){u(!0),setTimeout((function(){O("/formBuy"),u(!1)}),3e3)};return Object(d.jsx)("div",{children:m?Object(d.jsx)(v,{tipo:"preparando"}):t.length>0?Object(d.jsx)(x,{}):Object(d.jsx)(h,{})})},N=n.a.createContext(),C=function(e){var t=e.children,c=Object(a.useState)([]),n=Object(j.a)(c,2),r=n[0],s=n[1],i=Object(a.useState)(""),o=Object(j.a)(i,2),l=o[0],b=o[1],m=Object(a.useState)(""),u=Object(j.a)(m,2),O=u[0],h=u[1],x=function(){for(var e=0,t=0;t<r.length;t++){var c=r[t];e+=parseInt(c.cantidad)}return e},p=function(){for(var e=0,t=0;t<r.length;t++){var c=r[t];e+=parseInt(c.cantidad)*c.price}return v(e)},v=function(e){var t=e.toString();return 4===t.length?t=t.slice(0,1)+"."+t.slice(1,4):5===t.length?t=t.slice(0,2)+"."+t.slice(2,5):6===t.length?t=t.slice(0,3)+"."+t.slice(3,6):7===t.length&&(t=t.slice(0,1)+"."+t.slice(1,4)+"."+t.slice(4,7)),t};return Object(d.jsx)(N.Provider,{value:{addCarrito:function(e,t,c,a,n){var i=function(e){return r.some((function(t){return t.id===e}))}(e);if(i){var o=r.find((function(t){return t.id===e}));o.cantidad+=n;var l=r.filter((function(t){return t.id!==e}));s([].concat(Object(f.a)(l),[o]))}else s([].concat(Object(f.a)(r),[{id:e,name:t,price:c,img:a,cantidad:n}]));x(),p()},removeProducto:function(e){var t=r.filter((function(t){return t.id!=e}));s(t)},calculateCantTotal:x,calculatePrecioTotal:p,emptyCart:function(){s([]),window.localStorage.clear()},parseNumber:v,carrito:r,loadOrder:function(e){b(e)},order:l,saveEmail:function(e){h(e)},email:O},children:t})},y=N,S=(c(37),function(){var e=Object(a.useContext)(y).calculateCantTotal;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(i.b,{className:"carritoContainer",to:"/cart",children:[Object(d.jsx)("img",{className:"carrito",src:"https://res.cloudinary.com/dw94zgfgu/image/upload/v1640988719/carrito_vgr69e.png",alt:"imagen-carrito"}),Object(d.jsx)("h5",{className:"cantCarrito",children:e()})]})})}),k=function(){return Object(d.jsx)("main",{children:Object(d.jsx)("nav",{className:"navbar navbar-expand-lg nav-index",children:Object(d.jsxs)("div",{className:"container-fluid",children:[Object(d.jsx)(i.b,{className:"navbar-brand",to:"/",children:Object(d.jsx)("img",{className:"logoTesys",src:"https://res.cloudinary.com/dw94zgfgu/image/upload/v1640988732/logo_pcvqit.png",alt:"logo-tesys"})}),Object(d.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(d.jsxs)("ul",{className:"navbar-nav me-auto",children:[Object(d.jsxs)("li",{className:"nav-item dropdown",children:[Object(d.jsx)(i.b,{className:"active menu-boot m-4",to:"/",children:"CATEGORIAS"}),Object(d.jsx)("ul",{className:"dropdown-menu submenu-boot p-3","aria-labelledby":"navbarDropdown",children:Object(d.jsx)(p,{})})]}),Object(d.jsx)("li",{className:"nav-item dropdown sub-contenido-menu",children:Object(d.jsx)("a",{className:"active menu-boot m-4",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"SERVICIOS"})}),Object(d.jsxs)("li",{className:"nav-item dropdown",children:[Object(d.jsx)("a",{className:"active menu-boot m-4",href:"#",id:"navbarDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"MI CUENTA"}),Object(d.jsx)("ul",{className:"dropdown-menu submenu-boot p-3","aria-labelledby":"navbarDropdown",children:Object(d.jsx)(i.b,{className:"misCompras",to:"/myHistory",children:"Mis compras"})})]})]})}),Object(d.jsx)(S,{})]})})})},I=c(0),w=c.n(I),T=c(4),E=function(e){var t=e.producto,c=Object(a.useContext)(y).parseNumber;return Object(d.jsx)("div",{className:"tarjetas",children:Object(d.jsx)("div",{className:"tarjeta",children:Object(d.jsx)("div",{children:Object(d.jsxs)(i.b,{className:"tarjeta-contenido",to:"/detail/".concat(t.id),children:[Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:t.img,alt:t.name,classNameName:"cardImg"})}),Object(d.jsx)("div",{className:"tarjeta-contenido-detalle",children:Object(d.jsxs)("h6",{className:"tarjetaPrecio",children:["$ ",c(t.precio)]})}),Object(d.jsx)("p",{className:"cuotas",children:" 12 cuotas sin inter\xe9s"}),Object(d.jsx)("p",{className:"detalleProd",children:t.detail})]})})})})},P=function(e){var t=e.productos;return Object(d.jsx)("div",{children:t.map((function(e){return Object(d.jsx)(E,{producto:e},e.id)}))})},D=function(e){var t=Object(a.useState)([]),c=Object(j.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(!0),i=Object(j.a)(s,2),b=i[0],m=i[1],u=Object(o.h)().categoryId;return Object(a.useEffect)((function(){u?Object(O.f)(Object(O.i)(Object(O.c)(x,"productos"),Object(O.j)("category","==",u))).then((function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));r(t)})).catch((function(e){console.log("Error conexion firebase",e)})).finally((function(){m(!1)})):Object(T.a)(w.a.mark((function e(){var t,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(O.f)(Object(O.i)(Object(O.c)(x,"productos"),Object(O.h)("category")));case 3:t=e.sent,c=t.docs.map((function(e){return Object(l.a)({id:e.id},e.data())})),r(c),m(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[u]),Object(d.jsx)(d.Fragment,{children:b?Object(d.jsx)(v,{}):Object(d.jsx)(P,{productos:n})})},F=(c(53),c(30)),z=function(e){var t=e.onAdd,c=e.stock,n=e.initial,r=Object(a.useState)(n),s=Object(j.a)(r,2),i=s[0],o=s[1];return Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"contenidoCant",children:[Object(d.jsx)("div",{children:Object(d.jsx)("h5",{children:"Cantidad: "})}),Object(d.jsxs)("div",{className:"contadorContainer",children:[Object(d.jsx)("div",{className:"boton",onClick:function(){i>1&&o(i-1)},children:Object(d.jsx)(F.a,{})}),Object(d.jsx)("h4",{children:i}),Object(d.jsx)("div",{className:"boton",onClick:function(){i<c&&o(i+1)},children:Object(d.jsx)(F.b,{})})]})]}),Object(d.jsx)("button",{className:"botonAgregar",onClick:function(){return t(i)},children:"Agregar al carrito"})]})},B=function(e){var t=e.item,c=Object(a.useState)(0),n=Object(j.a)(c,2),r=(n[0],n[1]),s=Object(a.useState)(!0),o=Object(j.a)(s,2),l=o[0],b=o[1],m=Object(a.useContext)(y),u=m.addCarrito,O=m.parseNumber,h=function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)(i.b,{to:"/",children:Object(d.jsx)("button",{className:"botonSeguirCompra",children:"Seguir comprando"})}),Object(d.jsx)(i.b,{to:"/cart",children:Object(d.jsx)("button",{className:"botonVerCarrito",children:"Ir al carrito"})})]})},x=function(){return Object(d.jsx)("div",{children:Object(d.jsx)("h4",{className:"sinStock",children:"SIN STOCK"})})};return Object(d.jsxs)("div",{className:"itemDetalle",children:[Object(d.jsx)("div",{children:Object(d.jsx)("div",{children:Object(d.jsx)("img",{className:"itemImg",src:t.img,alt:t.name})})}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:t.detail}),Object(d.jsxs)("h4",{className:"itemPrecio",children:["$ ",O(t.precio)]}),Object(d.jsxs)("div",{className:"itemCarac",children:[Object(d.jsx)("p",{children:"Caracteristicas principales:"}),Object(d.jsxs)("ul",{children:[Object(d.jsxs)("li",{children:["Procesador: ",t.proc]}),Object(d.jsxs)("li",{children:["Memoria: ",t.memory]}),Object(d.jsxs)("li",{children:["Disco rigido ",t.disk]}),Object(d.jsx)("li",{children:"Sistema operativo: W10"}),Object(d.jsx)("li",{children:"Gabinete con fuente de 500 W con teclado y mouse"})]})]}),0===t.stock?Object(d.jsx)(x,{}):l?Object(d.jsx)(z,{onAdd:function(e){return function(e){if(t.stock>0){u(t.id,t.detail,t.precio,t.img,e),r(e),b(!1);var c=(new Date).toLocaleString();console.log(c),console.log("Se agregaron "+e+" productos al carrito")}else alert("Disculpe! No contamos con stock disponible")}(e)},stock:t.stock,initial:1}):Object(d.jsx)(h,{})]})]})},A=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],r=Object(o.h)().paramId;return Object(a.useEffect)((function(){return Object(O.e)(Object(O.d)(x,"productos",r)).then((function(e){var t=Object(l.a)({id:e.id},e.data());n(t)})).catch((function(e){console.log("Error conexion firebase",e)})).finally((function(){console.log("finalizo")})),function(){n([])}}),[r]),Object(d.jsx)("div",{children:0!==c.length?Object(d.jsx)(B,{item:c}):Object(d.jsx)(v,{})})},$=c(10),M=(c(54),function(){var e=Object(a.useContext)(y),t=e.carrito,c=e.calculatePrecioTotal,n=e.emptyCart,r=e.loadOrder,s=e.saveEmail,b=Object(o.g)(),m=Object(a.useState)(!1),u=Object(j.a)(m,2),h=u[0],p=u[1],f=Object(a.useState)({name:"",email:"",phone:"",comment:""}),g=Object(j.a)(f,2),N=g[0],C=g[1],S=function(e){C(Object(l.a)(Object(l.a)({},N),{},Object($.a)({},e.target.name,e.target.value)))};return Object(d.jsx)(d.Fragment,{children:h?Object(d.jsx)(v,{tipo:"comprando"}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{className:"titleForm",children:"\xa1Tu producto a un paso!"}),Object(d.jsxs)("form",{onSubmit:function(e){p(!0),s(N.email),e.preventDefault();var a={date:O.a.fromDate(new Date),product:t,total:c(),name:N.name,phone:N.phone,email:N.email,comment:N.comment},i=Object(O.k)(x),o=[];a.product.forEach((function(e){Object(O.e)(Object(O.d)(x,"productos",e.id)).then((function(t){t.data().stock>=e.cantidad?i.update(Object(O.d)(x,"productos",t.id),{stock:t.data().stock-e.cantidad}):o.push(Object(l.a)({id:t.id},t.data()))}))})),0===o.length&&Object(O.b)(Object(O.c)(x,"ordenes"),a).then((function(e){var t=e.id;i.commit().then((function(){r(t)}))})).catch((function(e){console.log("Error conexion firebase",e)})),setTimeout((function(){b("/purchaseCompleted"),n(),p(!1)}),2e3)},children:[Object(d.jsxs)("div",{className:"form-floating mb-3 mt-5",children:[Object(d.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"name@example.com",name:"name",onChange:S,required:!0}),Object(d.jsx)("label",{className:"form-compra",for:"floatingInput",children:"Nombre y Apellido"})]}),Object(d.jsxs)("div",{className:"form-floating mb-3",children:[Object(d.jsx)("input",{type:"email",className:"form-control",id:"floatingInput",placeholder:"name@example.com",name:"email",onChange:S,required:!0}),Object(d.jsx)("label",{className:"form-compra",for:"floatingInput",children:"Email"})]}),Object(d.jsxs)("div",{className:"form-floating mb-3",children:[Object(d.jsx)("input",{type:"number",className:"form-control",id:"floatingInput",placeholder:"name@example.com",name:"phone",onChange:S,required:!0}),Object(d.jsx)("label",{className:"form-compra",for:"floatingInput",children:"Celular"})]}),Object(d.jsxs)("div",{className:"form-floating mb-5",children:[Object(d.jsx)("textarea",{className:"form-control",id:"floatingTextarea",placeholder:"name@example.com",name:"comment",onChange:S}),Object(d.jsx)("label",{className:"form-compra",for:"floatingTextarea",children:"Comentario"})]}),Object(d.jsx)("button",{className:"btnFinish",type:"submit",children:"Finalizar mi compra"}),Object(d.jsx)(i.b,{to:"/cart",children:Object(d.jsx)("button",{className:"btnCancel",children:"Cancelar"})})]})]})})}),V=(c(55),function(){var e=Object(a.useContext)(y).order;return Object(d.jsxs)("div",{className:"container-compra",children:[Object(d.jsx)("h4",{className:"detail-compra",children:"\xa1Su compra fue realizada con \xe9xito!"}),Object(d.jsxs)("h5",{className:"detail-compra mt-5",children:["ID # ",e]}),Object(d.jsx)("h6",{className:"detail-compra mt-5",children:"Gracias por su compra, enviaremos el comprobante por mail"})]})}),_=function(e){var t=e.children,c=e.privType,n=Object(a.useContext)(y),r=n.carrito,s=n.order;return"formBuy"===c?0===r.length?Object(d.jsx)(o.a,{to:"/"}):t:"purchaseCompleted"===c?""===s?Object(d.jsx)(o.a,{to:"/"}):t:void 0},q=function(e){var t=e.orden,c=Object(a.useContext)(y).parseNumber;return Object(d.jsx)("div",{className:"order",children:Object(d.jsx)("div",{children:t.product.map((function(e){return Object(d.jsxs)("li",{className:"order-container",children:[Object(d.jsx)("div",{children:Object(d.jsx)("img",{className:"imgProd",src:e.img})}),Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{className:"detalleOrder",children:["ID ",t.id]}),Object(d.jsx)("p",{className:"detalleOrder",children:e.name}),Object(d.jsxs)("p",{className:"detalleOrder",children:["Total $ ",c(e.price)]})]})]})}))})})},L=function(e){var t=e.ordenes;return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{className:"order-tit",children:"Mi historial de compras"}),t.map((function(e){return Object(d.jsx)(q,{orden:e},e.id)}))]})},G=function(){var e=Object(a.useContext)(y).email,t=Object(a.useState)([]),c=Object(j.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(!0),i=Object(j.a)(s,2),o=i[0],b=i[1];return Object(a.useEffect)((function(){console.log(e),Object(O.f)(Object(O.i)(Object(O.c)(x,"ordenes"),Object(O.j)("email","==",e))).then((function(e){var t=e.docs.map((function(e){return Object(l.a)({id:e.id},e.data())}));r(t)})).catch((function(e){console.log("Error conexion firebase",e)})).finally((function(){b(!1)}))}),[e]),Object(d.jsx)("div",{children:o?Object(d.jsx)(v,{}):Object(d.jsx)(L,{ordenes:n})})};var K=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsx)(C,{children:Object(d.jsxs)(i.a,{children:[Object(d.jsx)(k,{}),Object(d.jsx)("div",{className:"App-header",children:Object(d.jsxs)(o.d,{children:[Object(d.jsx)(o.b,{path:"/",element:Object(d.jsx)(D,{greeting:"Bienvenidos a la tienda virtual"})}),Object(d.jsx)(o.b,{path:"/category/:categoryId",element:Object(d.jsx)(D,{})}),Object(d.jsx)(o.b,{path:"/detail/:paramId",element:Object(d.jsx)(A,{})}),Object(d.jsx)(o.b,{path:"/cart",element:Object(d.jsx)(g,{})}),Object(d.jsx)(o.b,{path:"/formBuy",element:Object(d.jsx)(_,{privType:"formBuy",children:Object(d.jsx)(M,{})})}),Object(d.jsx)(o.b,{path:"/purchaseCompleted",element:Object(d.jsx)(_,{privType:"purchaseCompleted",children:Object(d.jsx)(V,{})})}),Object(d.jsx)(o.b,{path:"/myHistory",element:Object(d.jsx)(G,{})}),Object(d.jsx)(o.b,{path:"*",element:Object(d.jsx)("h2",{children:"Not found"})})]})})]})})})},H=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,80)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),a(e),n(e),r(e),s(e)}))};c(56),c(57);s.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(K,{})}),document.getElementById("root")),H()}},[[79,1,2]]]);
//# sourceMappingURL=main.2c50dff8.chunk.js.map